{"id":"DkDw","dependencies":[{"name":"D:\\ALL LANGs\\projects\\WE-Wurks-back-end\\package.json","includedInParent":true,"mtime":1622136377773},{"name":"express","loc":{"line":1,"column":24},"parent":"D:\\ALL LANGs\\projects\\WE-Wurks-back-end\\routes\\authroutes.js","resolved":"D:\\ALL LANGs\\projects\\WE-Wurks-back-end\\node_modules\\express\\index.js"},{"name":"../models/user","loc":{"line":3,"column":21},"parent":"D:\\ALL LANGs\\projects\\WE-Wurks-back-end\\routes\\authroutes.js","resolved":"D:\\ALL LANGs\\projects\\WE-Wurks-back-end\\models\\user.js"},{"name":"jsonwebtoken","loc":{"line":4,"column":20},"parent":"D:\\ALL LANGs\\projects\\WE-Wurks-back-end\\routes\\authroutes.js","resolved":"D:\\ALL LANGs\\projects\\WE-Wurks-back-end\\node_modules\\jsonwebtoken\\index.js"}],"generated":{"js":"var e=require(\"express\"),n=e.Router(),o=require(\"../models/user\"),r=require(\"jsonwebtoken\");n.post(\"/signup\",function(e,n){var r=e.body.password,s=e.body.name,t=e.body.email;if(!s&&!t&&!r)return console.log(s,t,r),n.send(\"you must provide a complete data\");o.findOne({email:t}).then(function(e){if(e)return n.send(\"the user does exist\");new o({name:s,email:t,password:r}).save().then(function(e){return n.send(e)})}).catch(function(e){return console.log(e)})}),n.post(\"/login\",function(e,n){console.log(\"entered the login post\");var s=e.body,t=s.email,i=s.name,a=s.password;if(!i&&!t&&!a)return n.send(\"you must enter a complete data\");o.findOne({email:t}).then(function(e){if(!e)return n.send(\"no matching emails\");if(a!==e.password)return n.send(\"wrong password\");var o=r.sign({sub:e._id},\"our secret\");n.send(o)})}),module.exports=n;"},"sourceMaps":{"js":{"mappings":[{"source":"routes/authroutes.js","original":{"line":1,"column":0},"generated":{"line":1,"column":0}},{"source":"routes/authroutes.js","name":"express","original":{"line":1,"column":6},"generated":{"line":1,"column":4}},{"source":"routes/authroutes.js","name":"require","original":{"line":1,"column":16},"generated":{"line":1,"column":6}},{"source":"routes/authroutes.js","original":{"line":1,"column":24},"generated":{"line":1,"column":14}},{"source":"routes/authroutes.js","name":"router","original":{"line":2,"column":6},"generated":{"line":1,"column":25}},{"source":"routes/authroutes.js","name":"express","original":{"line":2,"column":15},"generated":{"line":1,"column":27}},{"source":"routes/authroutes.js","name":"Router","original":{"line":2,"column":23},"generated":{"line":1,"column":29}},{"source":"routes/authroutes.js","name":"User","original":{"line":3,"column":6},"generated":{"line":1,"column":38}},{"source":"routes/authroutes.js","name":"require","original":{"line":3,"column":13},"generated":{"line":1,"column":40}},{"source":"routes/authroutes.js","original":{"line":3,"column":21},"generated":{"line":1,"column":48}},{"source":"routes/authroutes.js","name":"jwt","original":{"line":4,"column":6},"generated":{"line":1,"column":66}},{"source":"routes/authroutes.js","name":"require","original":{"line":4,"column":12},"generated":{"line":1,"column":68}},{"source":"routes/authroutes.js","original":{"line":4,"column":20},"generated":{"line":1,"column":76}},{"source":"routes/authroutes.js","name":"router","original":{"line":6,"column":0},"generated":{"line":1,"column":92}},{"source":"routes/authroutes.js","name":"post","original":{"line":6,"column":7},"generated":{"line":1,"column":94}},{"source":"routes/authroutes.js","original":{"line":6,"column":12},"generated":{"line":1,"column":99}},{"source":"routes/authroutes.js","original":{"line":6,"column":23},"generated":{"line":1,"column":109}},{"source":"routes/authroutes.js","name":"req","original":{"line":6,"column":24},"generated":{"line":1,"column":118}},{"source":"routes/authroutes.js","name":"res","original":{"line":6,"column":29},"generated":{"line":1,"column":120}},{"source":"routes/authroutes.js","name":"password","original":{"line":7,"column":8},"generated":{"line":1,"column":123}},{"source":"routes/authroutes.js","name":"password","original":{"line":7,"column":8},"generated":{"line":1,"column":127}},{"source":"routes/authroutes.js","name":"req","original":{"line":7,"column":21},"generated":{"line":1,"column":129}},{"source":"routes/authroutes.js","name":"body","original":{"line":7,"column":25},"generated":{"line":1,"column":131}},{"source":"routes/authroutes.js","name":"password","original":{"line":7,"column":8},"generated":{"line":1,"column":136}},{"source":"routes/authroutes.js","name":"name","original":{"line":8,"column":8},"generated":{"line":1,"column":145}},{"source":"routes/authroutes.js","name":"req","original":{"line":8,"column":17},"generated":{"line":1,"column":147}},{"source":"routes/authroutes.js","name":"body","original":{"line":8,"column":21},"generated":{"line":1,"column":149}},{"source":"routes/authroutes.js","name":"name","original":{"line":8,"column":8},"generated":{"line":1,"column":154}},{"source":"routes/authroutes.js","name":"email","original":{"line":9,"column":8},"generated":{"line":1,"column":159}},{"source":"routes/authroutes.js","name":"req","original":{"line":9,"column":18},"generated":{"line":1,"column":161}},{"source":"routes/authroutes.js","name":"body","original":{"line":9,"column":22},"generated":{"line":1,"column":163}},{"source":"routes/authroutes.js","name":"email","original":{"line":9,"column":8},"generated":{"line":1,"column":168}},{"source":"routes/authroutes.js","original":{"line":11,"column":6},"generated":{"line":1,"column":174}},{"source":"routes/authroutes.js","name":"name","original":{"line":11,"column":7},"generated":{"line":1,"column":178}},{"source":"routes/authroutes.js","name":"email","original":{"line":11,"column":16},"generated":{"line":1,"column":182}},{"source":"routes/authroutes.js","name":"password","original":{"line":11,"column":26},"generated":{"line":1,"column":186}},{"source":"routes/authroutes.js","name":"res","original":{"line":13,"column":11},"generated":{"line":1,"column":188}},{"source":"routes/authroutes.js","name":"console","original":{"line":12,"column":4},"generated":{"line":1,"column":195}},{"source":"routes/authroutes.js","name":"log","original":{"line":12,"column":12},"generated":{"line":1,"column":203}},{"source":"routes/authroutes.js","name":"name","original":{"line":12,"column":16},"generated":{"line":1,"column":207}},{"source":"routes/authroutes.js","name":"email","original":{"line":12,"column":22},"generated":{"line":1,"column":209}},{"source":"routes/authroutes.js","name":"password","original":{"line":12,"column":29},"generated":{"line":1,"column":211}},{"source":"routes/authroutes.js","name":"res","original":{"line":13,"column":11},"generated":{"line":1,"column":214}},{"source":"routes/authroutes.js","name":"send","original":{"line":13,"column":15},"generated":{"line":1,"column":216}},{"source":"routes/authroutes.js","original":{"line":13,"column":20},"generated":{"line":1,"column":221}},{"source":"routes/authroutes.js","name":"User","original":{"line":16,"column":2},"generated":{"line":1,"column":257}},{"source":"routes/authroutes.js","name":"findOne","original":{"line":16,"column":7},"generated":{"line":1,"column":259}},{"source":"routes/authroutes.js","original":{"line":16,"column":15},"generated":{"line":1,"column":267}},{"source":"routes/authroutes.js","name":"email","original":{"line":16,"column":17},"generated":{"line":1,"column":268}},{"source":"routes/authroutes.js","name":"email","original":{"line":16,"column":17},"generated":{"line":1,"column":274}},{"source":"routes/authroutes.js","name":"then","original":{"line":17,"column":5},"generated":{"line":1,"column":278}},{"source":"routes/authroutes.js","original":{"line":17,"column":10},"generated":{"line":1,"column":283}},{"source":"routes/authroutes.js","name":"user","original":{"line":17,"column":11},"generated":{"line":1,"column":292}},{"source":"routes/authroutes.js","name":"user","original":{"line":18,"column":10},"generated":{"line":1,"column":295}},{"source":"routes/authroutes.js","name":"user","original":{"line":18,"column":10},"generated":{"line":1,"column":298}},{"source":"routes/authroutes.js","original":{"line":18,"column":16},"generated":{"line":1,"column":300}},{"source":"routes/authroutes.js","name":"res","original":{"line":18,"column":23},"generated":{"line":1,"column":307}},{"source":"routes/authroutes.js","name":"send","original":{"line":18,"column":27},"generated":{"line":1,"column":309}},{"source":"routes/authroutes.js","original":{"line":18,"column":32},"generated":{"line":1,"column":314}},{"source":"routes/authroutes.js","original":{"line":20,"column":22},"generated":{"line":1,"column":337}},{"source":"routes/authroutes.js","name":"User","original":{"line":20,"column":26},"generated":{"line":1,"column":341}},{"source":"routes/authroutes.js","original":{"line":20,"column":31},"generated":{"line":1,"column":343}},{"source":"routes/authroutes.js","name":"name","original":{"line":20,"column":33},"generated":{"line":1,"column":344}},{"source":"routes/authroutes.js","name":"name","original":{"line":20,"column":33},"generated":{"line":1,"column":349}},{"source":"routes/authroutes.js","name":"email","original":{"line":20,"column":39},"generated":{"line":1,"column":351}},{"source":"routes/authroutes.js","name":"email","original":{"line":20,"column":39},"generated":{"line":1,"column":357}},{"source":"routes/authroutes.js","name":"password","original":{"line":20,"column":46},"generated":{"line":1,"column":359}},{"source":"routes/authroutes.js","name":"password","original":{"line":20,"column":46},"generated":{"line":1,"column":368}},{"source":"routes/authroutes.js","name":"save","original":{"line":22,"column":14},"generated":{"line":1,"column":372}},{"source":"routes/authroutes.js","name":"then","original":{"line":22,"column":21},"generated":{"line":1,"column":379}},{"source":"routes/authroutes.js","original":{"line":22,"column":26},"generated":{"line":1,"column":384}},{"source":"routes/authroutes.js","name":"user","original":{"line":22,"column":27},"generated":{"line":1,"column":393}},{"source":"routes/authroutes.js","name":"res","original":{"line":22,"column":36},"generated":{"line":1,"column":396}},{"source":"routes/authroutes.js","name":"res","original":{"line":22,"column":36},"generated":{"line":1,"column":403}},{"source":"routes/authroutes.js","name":"send","original":{"line":22,"column":40},"generated":{"line":1,"column":405}},{"source":"routes/authroutes.js","name":"user","original":{"line":22,"column":45},"generated":{"line":1,"column":410}},{"source":"routes/authroutes.js","name":"catch","original":{"line":25,"column":5},"generated":{"line":1,"column":417}},{"source":"routes/authroutes.js","original":{"line":25,"column":11},"generated":{"line":1,"column":423}},{"source":"routes/authroutes.js","name":"err","original":{"line":25,"column":12},"generated":{"line":1,"column":432}},{"source":"routes/authroutes.js","name":"console","original":{"line":25,"column":20},"generated":{"line":1,"column":435}},{"source":"routes/authroutes.js","name":"console","original":{"line":25,"column":20},"generated":{"line":1,"column":442}},{"source":"routes/authroutes.js","name":"log","original":{"line":25,"column":28},"generated":{"line":1,"column":450}},{"source":"routes/authroutes.js","name":"err","original":{"line":25,"column":32},"generated":{"line":1,"column":454}},{"source":"routes/authroutes.js","name":"router","original":{"line":28,"column":0},"generated":{"line":1,"column":461}},{"source":"routes/authroutes.js","name":"post","original":{"line":28,"column":7},"generated":{"line":1,"column":463}},{"source":"routes/authroutes.js","original":{"line":28,"column":12},"generated":{"line":1,"column":468}},{"source":"routes/authroutes.js","original":{"line":28,"column":22},"generated":{"line":1,"column":477}},{"source":"routes/authroutes.js","name":"req","original":{"line":28,"column":23},"generated":{"line":1,"column":486}},{"source":"routes/authroutes.js","name":"res","original":{"line":28,"column":28},"generated":{"line":1,"column":488}},{"source":"routes/authroutes.js","name":"console","original":{"line":29,"column":2},"generated":{"line":1,"column":491}},{"source":"routes/authroutes.js","name":"log","original":{"line":29,"column":10},"generated":{"line":1,"column":499}},{"source":"routes/authroutes.js","original":{"line":29,"column":14},"generated":{"line":1,"column":503}},{"source":"routes/authroutes.js","name":"req","original":{"line":31,"column":34},"generated":{"line":1,"column":529}},{"source":"routes/authroutes.js","name":"req","original":{"line":31,"column":34},"generated":{"line":1,"column":533}},{"source":"routes/authroutes.js","name":"req","original":{"line":31,"column":34},"generated":{"line":1,"column":535}},{"source":"routes/authroutes.js","name":"body","original":{"line":31,"column":38},"generated":{"line":1,"column":537}},{"source":"routes/authroutes.js","name":"email","original":{"line":31,"column":8},"generated":{"line":1,"column":542}},{"source":"routes/authroutes.js","name":"email","original":{"line":31,"column":8},"generated":{"line":1,"column":544}},{"source":"routes/authroutes.js","name":"email","original":{"line":31,"column":8},"generated":{"line":1,"column":546}},{"source":"routes/authroutes.js","name":"name","original":{"line":31,"column":15},"generated":{"line":1,"column":552}},{"source":"routes/authroutes.js","name":"name","original":{"line":31,"column":15},"generated":{"line":1,"column":554}},{"source":"routes/authroutes.js","name":"name","original":{"line":31,"column":15},"generated":{"line":1,"column":556}},{"source":"routes/authroutes.js","name":"password","original":{"line":31,"column":21},"generated":{"line":1,"column":561}},{"source":"routes/authroutes.js","name":"password","original":{"line":31,"column":21},"generated":{"line":1,"column":563}},{"source":"routes/authroutes.js","name":"password","original":{"line":31,"column":21},"generated":{"line":1,"column":565}},{"source":"routes/authroutes.js","original":{"line":33,"column":6},"generated":{"line":1,"column":574}},{"source":"routes/authroutes.js","name":"name","original":{"line":33,"column":7},"generated":{"line":1,"column":578}},{"source":"routes/authroutes.js","name":"email","original":{"line":33,"column":16},"generated":{"line":1,"column":582}},{"source":"routes/authroutes.js","name":"password","original":{"line":33,"column":26},"generated":{"line":1,"column":586}},{"source":"routes/authroutes.js","name":"res","original":{"line":34,"column":11},"generated":{"line":1,"column":588}},{"source":"routes/authroutes.js","name":"res","original":{"line":34,"column":11},"generated":{"line":1,"column":595}},{"source":"routes/authroutes.js","name":"send","original":{"line":34,"column":15},"generated":{"line":1,"column":597}},{"source":"routes/authroutes.js","original":{"line":34,"column":20},"generated":{"line":1,"column":602}},{"source":"routes/authroutes.js","name":"User","original":{"line":37,"column":2},"generated":{"line":1,"column":636}},{"source":"routes/authroutes.js","name":"findOne","original":{"line":37,"column":7},"generated":{"line":1,"column":638}},{"source":"routes/authroutes.js","original":{"line":37,"column":15},"generated":{"line":1,"column":646}},{"source":"routes/authroutes.js","name":"email","original":{"line":37,"column":17},"generated":{"line":1,"column":647}},{"source":"routes/authroutes.js","name":"email","original":{"line":37,"column":17},"generated":{"line":1,"column":653}},{"source":"routes/authroutes.js","name":"then","original":{"line":37,"column":26},"generated":{"line":1,"column":657}},{"source":"routes/authroutes.js","original":{"line":37,"column":31},"generated":{"line":1,"column":662}},{"source":"routes/authroutes.js","name":"user","original":{"line":37,"column":32},"generated":{"line":1,"column":671}},{"source":"routes/authroutes.js","original":{"line":38,"column":8},"generated":{"line":1,"column":674}},{"source":"routes/authroutes.js","name":"user","original":{"line":38,"column":9},"generated":{"line":1,"column":678}},{"source":"routes/authroutes.js","original":{"line":38,"column":15},"generated":{"line":1,"column":680}},{"source":"routes/authroutes.js","name":"res","original":{"line":38,"column":22},"generated":{"line":1,"column":687}},{"source":"routes/authroutes.js","name":"send","original":{"line":38,"column":26},"generated":{"line":1,"column":689}},{"source":"routes/authroutes.js","original":{"line":38,"column":31},"generated":{"line":1,"column":694}},{"source":"routes/authroutes.js","name":"password","original":{"line":40,"column":8},"generated":{"line":1,"column":716}},{"source":"routes/authroutes.js","name":"password","original":{"line":40,"column":8},"generated":{"line":1,"column":719}},{"source":"routes/authroutes.js","name":"user","original":{"line":40,"column":21},"generated":{"line":1,"column":723}},{"source":"routes/authroutes.js","name":"password","original":{"line":40,"column":26},"generated":{"line":1,"column":725}},{"source":"routes/authroutes.js","original":{"line":40,"column":36},"generated":{"line":1,"column":734}},{"source":"routes/authroutes.js","name":"res","original":{"line":40,"column":43},"generated":{"line":1,"column":741}},{"source":"routes/authroutes.js","name":"send","original":{"line":40,"column":47},"generated":{"line":1,"column":743}},{"source":"routes/authroutes.js","original":{"line":40,"column":52},"generated":{"line":1,"column":748}},{"source":"routes/authroutes.js","name":"token","original":{"line":42,"column":10},"generated":{"line":1,"column":766}},{"source":"routes/authroutes.js","name":"token","original":{"line":42,"column":10},"generated":{"line":1,"column":770}},{"source":"routes/authroutes.js","name":"jwt","original":{"line":42,"column":18},"generated":{"line":1,"column":772}},{"source":"routes/authroutes.js","name":"sign","original":{"line":42,"column":22},"generated":{"line":1,"column":774}},{"source":"routes/authroutes.js","original":{"line":42,"column":27},"generated":{"line":1,"column":779}},{"source":"routes/authroutes.js","name":"sub","original":{"line":42,"column":29},"generated":{"line":1,"column":780}},{"source":"routes/authroutes.js","name":"user","original":{"line":42,"column":34},"generated":{"line":1,"column":784}},{"source":"routes/authroutes.js","name":"_id","original":{"line":42,"column":39},"generated":{"line":1,"column":786}},{"source":"routes/authroutes.js","original":{"line":42,"column":46},"generated":{"line":1,"column":791}},{"source":"routes/authroutes.js","name":"res","original":{"line":44,"column":4},"generated":{"line":1,"column":805}},{"source":"routes/authroutes.js","name":"send","original":{"line":44,"column":8},"generated":{"line":1,"column":807}},{"source":"routes/authroutes.js","name":"token","original":{"line":44,"column":13},"generated":{"line":1,"column":812}},{"source":"routes/authroutes.js","name":"module","original":{"line":48,"column":0},"generated":{"line":1,"column":819}},{"source":"routes/authroutes.js","name":"exports","original":{"line":48,"column":7},"generated":{"line":1,"column":826}},{"source":"routes/authroutes.js","name":"router","original":{"line":48,"column":17},"generated":{"line":1,"column":834}}],"sources":{"routes/authroutes.js":"const express = require(\"express\");\r\nconst router = express.Router();\r\nconst User = require(\"../models/user\");\r\nconst jwt = require(\"jsonwebtoken\");\r\n\r\nrouter.post(\"/signup\", (req, res) => {\r\n  let { password } = req.body;\r\n  let { name } = req.body;\r\n  let { email } = req.body;\r\n\r\n  if (!name && !email && !password) {\r\n    console.log(name, email, password);\r\n    return res.send(\"you must provide a complete data\");\r\n  }\r\n\r\n  User.findOne({ email })\r\n    .then((user) => {\r\n      if (user) return res.send(\"the user does exist\");\r\n      // create the user\r\n      const newUser = new User({ name, email, password });\r\n      // now our user is created but didn't saved into our database so let's save it\r\n      newUser.save().then((user) => res.send(user));\r\n    })\r\n\r\n    .catch((err) => console.log(err));\r\n});\r\n\r\nrouter.post(\"/login\", (req, res) => {\r\n  console.log(\"entered the login post\");\r\n\r\n  let { email, name, password } = req.body;\r\n\r\n  if (!name && !email && !password) {\r\n    return res.send(\"you must enter a complete data\");\r\n  }\r\n\r\n  User.findOne({ email }).then((user) => {\r\n    if (!user) return res.send(\"no matching emails\");\r\n\r\n    if (password !== user.password) return res.send(\"wrong password\");\r\n\r\n    const token = jwt.sign({ sub: user._id }, \"our secret\");\r\n\r\n    res.send(token);\r\n  });\r\n});\r\n\r\nmodule.exports = router;\r\n"},"lineCount":null}},"error":null,"hash":"260b78d746f0f96f137dc693c7e7d5fc","cacheData":{"env":{}}}